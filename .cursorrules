# Fresh Lab'O - SystÃ¨me de RÃ©servation
# RÃ¨gles de dÃ©veloppement Cursor AI

## ğŸ¨ IDENTITÃ‰ VISUELLE

### Palette de couleurs
```css
--primary-cyan: #00BFFF;
--primary-orange: #FF8C00;
--dark-blue: #1A1A4D;
--navy: #0F1035;
--light-blue: #40E0D0;
--accent-orange: #FFB347;
--white: #FFFFFF;
--gray-light: #F5F5F5;
--gray-medium: #CCCCCC;
--gray-dark: #666666;
```

### Typographie
- Titre principal: 'Poppins', sans-serif (Bold 700-800)
- Sous-titres: 'Poppins', sans-serif (SemiBold 600)
- Texte corps: 'Inter', sans-serif (Regular 400, Medium 500)
- Prix: 'Poppins', sans-serif (Bold 700)

### Effets visuels
- Bulles flottantes (inspiration logo Fresh Lab'O)
- DÃ©gradÃ©s subtils bleu-cyan
- Ombres douces pour profondeur
- Animations fluides et professionnelles
- Coins arrondis (border-radius: 12px-24px)

## ğŸ—ï¸ ARCHITECTURE TECHNIQUE

### Stack Technology
- **Frontend**: Next.js 14+ (App Router)
- **UI**: React 18+, TypeScript
- **Styling**: Tailwind CSS + CSS Modules pour effets custom
- **Animations**: Framer Motion
- **Backend**: Next.js API Routes
- **Database**: Supabase (PostgreSQL)
- **Auth**: Supabase Auth
- **Calendar**: Google Calendar API
- **Forms**: React Hook Form + Zod validation
- **State**: Zustand (Ã©tat global lÃ©ger)
- **Payments**: Stripe (Ã  intÃ©grer phase 2)

### Structure du projet
```
fresh-labo/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ (auth)/
â”‚   â”‚   â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â”‚   â””â”€â”€ register/
â”‚   â”‚   â”œâ”€â”€ (booking)/
â”‚   â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ estimate/
â”‚   â”‚   â”‚   â””â”€â”€ confirmation/
â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ bookings/
â”‚   â”‚   â”‚   â”œâ”€â”€ calendar/
â”‚   â”‚   â”‚   â””â”€â”€ estimates/
â”‚   â”‚   â””â”€â”€ page.tsx (landing)
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ui/ (shadcn/ui)
â”‚   â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”œâ”€â”€ booking/
â”‚   â”‚   â””â”€â”€ common/
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ supabase/
â”‚   â”‚   â”œâ”€â”€ calendar/
â”‚   â”‚   â”œâ”€â”€ validations/
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ types/
â”‚   â””â”€â”€ styles/
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ images/
â”‚   â””â”€â”€ icons/
â”œâ”€â”€ supabase/
â”‚   â”œâ”€â”€ migrations/
â”‚   â””â”€â”€ seed.sql
â””â”€â”€ docs/
    â””â”€â”€ MVP.md
```

## ğŸ“Š MODÃˆLE DE DONNÃ‰ES

### Tables Supabase

#### users (extends Supabase Auth)
```sql
- id (uuid, PK)
- email (text)
- full_name (text)
- phone (text)
- address (text)
- created_at (timestamp)
```

#### services
```sql
- id (uuid, PK)
- category (enum: 'matelas', 'vehicule', 'tapis', 'canape')
- name (text)
- description (text)
- base_price (decimal)
- image_url (text)
- active (boolean)
```

#### service_options
```sql
- id (uuid, PK)
- service_id (uuid, FK)
- name (text) -- ex: "2 faces", "King size"
- price_modifier (decimal)
- option_type (enum: 'size', 'sides', 'vehicle_type')
```

#### bookings
```sql
- id (uuid, PK)
- user_id (uuid, FK)
- service_id (uuid, FK)
- status (enum: 'pending', 'confirmed', 'completed', 'cancelled')
- scheduled_date (timestamp)
- estimated_price (decimal)
- final_price (decimal)
- address (text)
- notes (text)
- google_calendar_event_id (text)
- created_at (timestamp)
- updated_at (timestamp)
```

#### booking_options
```sql
- id (uuid, PK)
- booking_id (uuid, FK)
- option_id (uuid, FK)
- quantity (integer)
```

#### estimates
```sql
- id (uuid, PK)
- user_email (text)
- service_category (text)
- estimated_price (decimal)
- options (jsonb)
- expires_at (timestamp)
- converted_to_booking (boolean)
- created_at (timestamp)
```

## ğŸ¯ RÃˆGLES DE DÃ‰VELOPPEMENT

### Code Quality
1. **TypeScript strict mode** activÃ©
2. **Pas de any types** - toujours typer explicitement
3. **ESLint + Prettier** configurÃ©s
4. **Composants fonctionnels** uniquement (pas de class components)
5. **Props destructurÃ©es** dÃ¨s la dÃ©claration
6. **Custom hooks** pour logique rÃ©utilisable
7. **Error boundaries** pour gestion erreurs
8. **Loading states** pour chaque action async

### Composants
```tsx
// Template de composant
import { FC } from 'react';
import { motion } from 'framer-motion';

interface ComponentProps {
  title: string;
  // ... autres props
}

export const Component: FC<ComponentProps> = ({ title, ...props }) => {
  return (
    <motion.div
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      className="..."
    >
      {/* Contenu */}
    </motion.div>
  );
};
```

### API Routes
```tsx
// Template API route
import { NextResponse } from 'next/server';
import { createServerClient } from '@/lib/supabase/server';

export async function POST(request: Request) {
  try {
    const supabase = createServerClient();
    const body = await request.json();
    
    // Validation
    // Logic
    
    return NextResponse.json({ success: true, data: ... });
  } catch (error) {
    return NextResponse.json(
      { error: 'Message erreur' },
      { status: 500 }
    );
  }
}
```

### Validation
```tsx
// Utiliser Zod pour toute validation
import { z } from 'zod';

const bookingSchema = z.object({
  serviceId: z.string().uuid(),
  date: z.string().datetime(),
  address: z.string().min(10),
  // ...
});
```

## ğŸ¨ GUIDELINES UI/UX

### Animations
- **Page transitions**: fade + slide (300ms)
- **Hover effects**: scale(1.02) + shadow
- **Loading**: spinner cyan avec animation pulse
- **Success**: checkmark animÃ© avec confetti subtil
- **Formulaires**: focus avec border cyan + shadow glow

### Responsive
- Mobile-first approach
- Breakpoints: 640px (sm), 768px (md), 1024px (lg), 1280px (xl)
- Touch-friendly (min 44px pour boutons)

### AccessibilitÃ©
- Labels pour tous les inputs
- ARIA attributes appropriÃ©s
- Contraste WCAG AA minimum
- Navigation clavier complÃ¨te
- Focus visible

### Messages utilisateur
- FranÃ§ais professionnel
- Ton friendly mais expert
- "Vous" (vouvoiement)
- Emojis lÃ©gers (âœ… âŒ ğŸ§¼ ğŸš— etc.)

## ğŸ” SÃ‰CURITÃ‰

1. **Authentification**: Middleware Next.js pour routes protÃ©gÃ©es
2. **Validation**: Server-side pour toutes entrÃ©es
3. **Rate limiting**: 10 requÃªtes/minute par IP
4. **CSRF protection**: Tokens pour formulaires
5. **Sanitization**: Toutes entrÃ©es utilisateur
6. **Environment variables**: Jamais exposÃ©es cÃ´tÃ© client
7. **RLS Supabase**: Policies strictes

## ğŸ“± INTÃ‰GRATION GOOGLE CALENDAR

### Setup
```typescript
// lib/calendar/client.ts
import { google } from 'googleapis';

const oauth2Client = new google.auth.OAuth2(
  process.env.GOOGLE_CLIENT_ID,
  process.env.GOOGLE_CLIENT_SECRET,
  process.env.GOOGLE_REDIRECT_URI
);

const calendar = google.calendar({ version: 'v3', auth: oauth2Client });
```

### FonctionnalitÃ©s
1. CrÃ©er event lors de confirmation booking
2. Envoyer invitations automatiques
3. Sync bidirectionnel (update/cancel)
4. Afficher disponibilitÃ©s en temps rÃ©el
5. Reminders 24h et 2h avant

## ğŸš€ MVP - PHASE 1

### FonctionnalitÃ©s essentielles
âœ… Landing page attractive
âœ… SÃ©lection service (4 catÃ©gories)
âœ… Configurateur avec options
âœ… Calcul estimation instantanÃ©
âœ… Formulaire rÃ©servation
âœ… IntÃ©gration Google Calendar
âœ… Confirmation par email
âœ… Page "Mes rÃ©servations" (basique)

### Ã€ EXCLURE du MVP
âŒ Paiement en ligne (Stripe)
âŒ Dashboard admin complet
âŒ Chat support
âŒ SystÃ¨me de reviews
âŒ Programme fidÃ©litÃ©
âŒ App mobile
âŒ Multi-langue

## ğŸ§ª TESTING

### Tests Ã  implÃ©menter
- Unit tests (Vitest): Fonctions calcul prix
- Integration tests: API routes
- E2E tests (Playwright): Parcours rÃ©servation complet
- AccessibilitÃ© (axe-core)

### Coverage minimum
- 80% pour fonctions mÃ©tier
- 60% global

## ğŸ“ DOCUMENTATION

### Code
- JSDoc pour fonctions complexes
- README.md avec setup instructions
- CHANGELOG.md

### API
- Swagger/OpenAPI pour endpoints
- Exemples requÃªtes/rÃ©ponses

## ğŸ¯ PERFORMANCE

### Objectifs
- First Contentful Paint: < 1.5s
- Time to Interactive: < 3s
- Lighthouse score: > 90
- Bundle size: < 200KB (initial)

### Optimisations
- Image optimization (next/image)
- Code splitting
- Lazy loading
- Static generation oÃ¹ possible
- CDN pour assets

## ğŸ”„ GIT WORKFLOW

### Branches
- `main`: Production
- `develop`: Development
- `feature/*`: Nouvelles fonctionnalitÃ©s
- `fix/*`: Bug fixes

### Commits
Format: `type(scope): message`
- feat: Nouvelle fonctionnalitÃ©
- fix: Bug fix
- docs: Documentation
- style: Formatting
- refactor: Refactoring
- test: Tests
- chore: Maintenance

Exemple: `feat(booking): add calendar integration`

## ğŸŒŸ PROCHAINES PHASES

### Phase 2 - Paiement & Admin
- IntÃ©gration Stripe
- Dashboard admin complet
- Gestion stocks produits
- Rapports & analytics
- Notifications push

### Phase 3 - ExpÃ©rience client
- Programme fidÃ©litÃ©
- Reviews & ratings
- Chat support temps rÃ©el
- Blog & conseils
- App mobile (React Native)

### Phase 4 - Scaling
- Multi-locataires
- API publique
- IntÃ©grations tierces
- IA pour optimisation planning
- Tracking flotte vÃ©hicules

---

## ğŸš¨ RÃˆGLES ABSOLUES

1. **JAMAIS** commit de credentials
2. **TOUJOURS** valider cÃ´tÃ© serveur
3. **JAMAIS** de donnÃ©es sensibles en localStorage
4. **TOUJOURS** tester responsive mobile
5. **JAMAIS** de code mort (commented code)
6. **TOUJOURS** gÃ©rer les erreurs gracefully
7. **RESPECT STRICT** du branding Fresh Lab'O

---

Ces rÃ¨gles sont le contrat de dÃ©veloppement. Cursor AI doit les respecter scrupuleusement pour maintenir la qualitÃ©, la cohÃ©rence et la sÃ©curitÃ© du projet Fresh Lab'O.
